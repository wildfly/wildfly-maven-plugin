















































































<!DOCTYPE html>
<!--
 Generated by Apache Maven Doxia the 2022-07-18
 Rendered using Docs Maven Skin 2.2.6 (https://github.com/Bernardo-MG/docs-maven-skin)
-->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
    <meta charset="UTF-8">

    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />

    <!-- IE Compatibility tag -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>WildFly Maven Plugin &#x2013; Adding Resources Examples</title>
    <link href="./favicon.ico" rel="shortcut icon" type="image/x-icon" />

    <!-- Metadata -->
    <meta name="description" content="WildFly Maven Plugin">
    <meta name="author" content="JBoss.org Community" />

    <!-- Facebook Open Graph -->
    <meta property="og:type" content="website"/>
    <meta property="og:site_name" content="WildFly Maven Plugin &#x2013; Adding Resources Examples"/>
    <meta property="og:title" content="WildFly Maven Plugin &#x2013; Adding Resources Examples"/>
    <meta property="og:description" content="WildFly Maven Plugin"/>

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary"/>
    <meta name="twitter:creator" content="@WildFlyAS"/>
    <meta name="twitter:title" content="WildFly Maven Plugin &#x2013; Adding Resources Examples"/>
    <meta name="twitter:description" content="WildFly Maven Plugin"/>

    <!-- CSS -->
    <link rel="stylesheet" href="./lib/bootswatch/dist/slate/bootstrap.min.css">
    <link rel="stylesheet" href="./lib/font-awesome/css/all.min.css">
    <link rel="stylesheet" href="./lib/highlight/styles/rainbow.css">
    <!-- Docs Template style -->
    <link rel="stylesheet" href="./css/style.min.css">
    
    <!-- Custom style -->
    <link rel="stylesheet" href="./css/custom.css">


    <!-- HTML5 Shiv. For IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
    <script src="./lib/html5shiv/dist/html5shiv.min.js"></script>
    <![endif]-->

</head>
<body class="d-flex flex-column">
<header>
    <nav id="navbar-main" class="navbar navbar-expand-md navbar-bg-primary bg-bg-primary">
        <div class="container-fluid">
            <a class="navbar-brand" href="./index.html">WildFly Maven Plugin</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar-main-menu" aria-controls="navbar-main" aria-expanded="false" aria-label="Toggle navigation">
               <span class="navbar-toggler-icon"></span>
            </button>
        
            <small class="navbar-text d-none d-md-block"><span id="navbar-version">3.0.2.Final</span> (<time id="navbar-date">2022-07-18</time>)</small>
            <div class="collapse navbar-collapse" id="navbar-main-menu">
                <ul class="nav navbar-nav ms-auto">
                    <li class="nav-item dropdown">
                        <a href="#" class="nav-link dropdown-toggle" id="Overview_menu" data-bs-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Overview</a>
                        <ul class="dropdown-menu dropdown-menu-end" role="menu" aria-labelledby="Overview_menu">
                            <li><a class="dropdown-item" href="index.html" title="Introduction">Introduction</a></li>
                            <li><a class="dropdown-item" href="plugin-info.html" title="Goals">Goals</a></li>
                            <li><a class="dropdown-item" href="usage.html" title="Usage">Usage</a></li>
                            <li><a class="dropdown-item" href="faq.html" title="FAQ">FAQ</a></li>
                        </ul>
                    </li>
                    <li class="nav-item dropdown">
                        <a href="#" class="nav-link dropdown-toggle" id="Examples_menu" data-bs-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Examples</a>
                        <ul class="dropdown-menu dropdown-menu-end" role="menu" aria-labelledby="Examples_menu">
                            <li><a class="dropdown-item" href="add-resource-example.html" title="Add Resource Example">Add Resource Example</a></li>
                            <li><a class="dropdown-item" href="deployment-example.html" title="Deploy Application Example">Deploy Application Example</a></li>
                            <li><a class="dropdown-item" href="complex-example.html" title="Complex Example">Complex Example</a></li>
                            <li><a class="dropdown-item" href="execute-commands-example.html" title="Execute Commands Example">Execute Commands Example</a></li>
                            <li><a class="dropdown-item" href="run-example.html" title="Run Example">Run Example</a></li>
                            <li><a class="dropdown-item" href="package-example.html" title="Package Example">Package Example</a></li>
                            <li><a class="dropdown-item" href="provision-example.html" title="Provision Example">Provision Example</a></li>
                        </ul>
                    </li>
                    <li class="nav-item dropdown">
                        <a href="#" class="nav-link dropdown-toggle" id="Project_Documentation_menu" data-bs-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Project Documentation</a>
                        <ul class="dropdown-menu dropdown-menu-end" role="menu" aria-labelledby="Project_Documentation_menu">
                            <li><a class="dropdown-item" href="apidocs/index.html" title="JavaDoc">JavaDoc</a></li>
                            <li><a class="dropdown-item" href="https://docs.wildfly.org" title="WildFly">WildFly</a></li>
                        </ul>
                    </li>
                    <li class="nav-item dropdown">
                        <a href="#" class="nav-link dropdown-toggle" id="Reports_menu" data-bs-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Reports</a>
                        <ul class="dropdown-menu dropdown-menu-end" role="menu" aria-labelledby="Reports_menu">
                            <li><a class="dropdown-item" href="/project-info.html" title="Project Information">Project Information</a></li>
                            <li><a class="dropdown-item" href="/project-reports.html" title="Project Reports">Project Reports</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
</header>
<section id="main-section" class="container flex-grow-1">
<header class="pb-2 mt-4 mb-2 border-bottom">
 <h1 id="Adding-Resources-Examples">Adding Resources Examples</h1>
</header> 
<p>The add-resources goal allows you to add resources such as datsources etc to a running WildFly instance.</p>
<section> 
 <h2 id="Adding-datasources"><a name="Adding_datasources"></a>Adding datasources</h2> 
 <p>This can be combined with the <a href="add-resource-mojo.html">add-resource</a> goal to automatically deploy the datasource drivers.</p> 
 <p>The example below shows how to add a datasource that uses the default h2 database:</p> 
 <div> 
  <div> 
   <pre class="border shadow rounded"><code>&lt;project&gt;
    ...
    &lt;build&gt;
        &lt;plugins&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;org.wildfly.plugins&lt;/groupId&gt;
                &lt;artifactId&gt;wildfly-maven-plugin&lt;/artifactId&gt;
                &lt;version&gt;3.0.2.Final&lt;/version&gt;
                &lt;executions&gt;
                    &lt;execution&gt;
                        &lt;id&gt;add-datasource&lt;/id&gt;
                        &lt;phase&gt;package&lt;/phase&gt;
                        &lt;goals&gt;
                            &lt;goal&gt;add-resource&lt;/goal&gt;
                        &lt;/goals&gt;
                        &lt;configuration&gt;
                            &lt;address&gt;subsystem=datasources,data-source=java:jboss/myDs&lt;/address&gt;
                            &lt;resources&gt;
                                &lt;resource&gt;
                                    &lt;properties&gt;
                                        &lt;jndi-name&gt;java:jboss/myDs&lt;/jndi-name&gt;
                                        &lt;enabled&gt;true&lt;/enabled&gt;
                                        &lt;connection-url&gt;jdbc:h2:mem:test;DB_CLOSE_DELAY=-1&lt;/connection-url&gt;
                                        &lt;driver-class&gt;org.h2.Driver&lt;/driver-class&gt;
                                        &lt;driver-name&gt;h2&lt;/driver-name&gt;
                                        &lt;user-name&gt;sa&lt;/user-name&gt;
                                        &lt;password&gt;sa&lt;/password&gt;
                                    &lt;/properties&gt;
                                &lt;/resource&gt;
                            &lt;/resources&gt;
                        &lt;/configuration&gt;
                    &lt;/execution&gt;
                &lt;/executions&gt;
            &lt;/plugin&gt;
        &lt;/plugins&gt;
    &lt;/build&gt;
...
&lt;/project&gt;</code></pre>
  </div>
 </div> 
 <p>The example below shows how to configure a postgresql XA data source, including deploying the driver. The postgresql driver module must be listed in the &lt;dependencies&gt; section of the pom.</p> 
 <div> 
  <div> 
   <pre class="border shadow rounded"><code>&lt;project&gt;
    ...
    &lt;build&gt;
        ...
        &lt;plugins&gt;
            ...
            &lt;plugin&gt;
                &lt;groupId&gt;org.wildfly.plugins&lt;/groupId&gt;
                &lt;artifactId&gt;wildfly-maven-plugin&lt;/artifactId&gt;
                &lt;version&gt;3.0.2.Final&lt;/version&gt;
                &lt;executions&gt;
                    &lt;execution&gt;
                        &lt;id&gt;deploy-postgresql&lt;/id&gt;
                        &lt;phase&gt;package&lt;/phase&gt;
                        &lt;goals&gt;
                            &lt;goal&gt;deploy-artifact&lt;/goal&gt;
                        &lt;/goals&gt;
                        &lt;configuration&gt;
                            &lt;groupId&gt;postgresql&lt;/groupId&gt;
                            &lt;artifactId&gt;postgresql&lt;/artifactId&gt;
                            &lt;name&gt;postgresql.jar&lt;/name&gt;
                        &lt;/configuration&gt;
                    &lt;/execution&gt;
                    &lt;execution&gt;
                        &lt;id&gt;add-datasource&lt;/id&gt;
                        &lt;phase&gt;install&lt;/phase&gt;
                        &lt;goals&gt;
                            &lt;goal&gt;add-resource&lt;/goal&gt;
                        &lt;/goals&gt;
                        &lt;configuration&gt;
                            &lt;address&gt;subsystem=datasources&lt;/address&gt;
                            &lt;resources&gt;
                                &lt;resource&gt;
                                    &lt;address&gt;xa-data-source=java:jboss/datasources/postgresDS&lt;/address&gt;
                                    &lt;properties&gt;
                                        &lt;xa-datasource-class&gt;org.postgresql.xa.PGXADataSource&lt;/xa-datasource-class&gt;
                                        &lt;jndi-name&gt;java:jboss/datasources/postgresDS&lt;/jndi-name&gt;
                                        &lt;enabled&gt;true&lt;/enabled&gt;
                                        &lt;driver-name&gt;postgresql.jar&lt;/driver-name&gt;
                                    &lt;/properties&gt;
                                    &lt;resources&gt;
                                        &lt;resource&gt;
                                            &lt;address&gt;
                                                xa-datasource-properties=DatabaseName
                                            &lt;/address&gt;
                                            &lt;properties&gt;
                                                &lt;value&gt;myDatabase&lt;/value&gt;
                                            &lt;/properties&gt;
                                        &lt;/resource&gt;
                                        &lt;resource&gt;
                                            &lt;address&gt;
                                                xa-datasource-properties=ServerName
                                            &lt;/address&gt;
                                            &lt;properties&gt;
                                                &lt;value&gt;localhost&lt;/value&gt;
                                            &lt;/properties&gt;
                                        &lt;/resource&gt;
                                        &lt;resource&gt;
                                            &lt;address&gt;
                                                xa-datasource-properties=User
                                            &lt;/address&gt;
                                            &lt;properties&gt;
                                                &lt;value&gt;dbuser&lt;/value&gt;
                                            &lt;/properties&gt;
                                        &lt;/resource&gt;
                                        &lt;resource&gt;
                                            &lt;address&gt;
                                                xa-datasource-properties=Password
                                            &lt;/address&gt;
                                            &lt;properties&gt;
                                                &lt;value&gt;supersecret&lt;/value&gt;
                                            &lt;/properties&gt;
                                        &lt;/resource&gt;
                                    &lt;/resources&gt;
                                &lt;/resource&gt;
                            &lt;/resources&gt;
                        &lt;/configuration&gt;
                    &lt;/execution&gt;
                &lt;/executions&gt;
            &lt;/plugin&gt;
            ...
        &lt;/plugins&gt;
        ...
    &lt;/build&gt;
...
&lt;/project&gt;</code></pre>
  </div>
 </div> 
 <p>The xml tags in the &lt;properties&gt; element correspond directly to the DMR nodes in the corresponding management operation. If you need to use DMR nodes of a non-primitive type then you must prefix the value with the !! escape sequence, which will cause the value to be interpreted as a string representation of a DMR node. For example in the &lt;xa-data-source-properties&gt; element about &lt;xa-datasource-properties&gt; is a DMR property list.</p>
</section>
<section> 
 <h2 id="Adding-other-resources"><a name="Adding_other_resources"></a>Adding other resources</h2> 
 <p>It is also possible to deploy resources other than datasources, the example below shows how to deploy a JMS queue:</p> 
 <div> 
  <div> 
   <pre class="border shadow rounded"><code>&lt;project&gt;
    ...
    &lt;build&gt;
        ...
        &lt;plugins&gt;
            ...
            &lt;plugin&gt;
                &lt;groupId&gt;org.wildfly.plugins&lt;/groupId&gt;
                &lt;artifactId&gt;wildfly-maven-plugin&lt;/artifactId&gt;
                &lt;version&gt;3.0.2.Final&lt;/version&gt;
                &lt;executions&gt;
                    &lt;execution&gt;
                        &lt;id&gt;add-jms-queue&lt;/id&gt;
                        &lt;phase&gt;install&lt;/phase&gt;
                        &lt;goals&gt;
                            &lt;goal&gt;add-resource&lt;/goal&gt;
                        &lt;/goals&gt;
                        &lt;configuration&gt;
                            &lt;resources&gt;
                                &lt;resource&gt;
                                    &lt;address&gt;subsystem=messaging,hornetq-server=default,jms-queue=myJmsQueue&lt;/address&gt;
                                    &lt;properties&gt;
                                        &lt;durable&gt;true&lt;/durable&gt;
                                        &lt;entries&gt;!!["java:jboss/myJmsQueue", "java:jboss/myJmsQueueAlias"]&lt;/entries&gt;
                                    &lt;/properties&gt;
                                &lt;/resource&gt;
                            &lt;/resources&gt;
                        &lt;/configuration&gt;
                    &lt;/execution&gt;
                &lt;/executions&gt;
            &lt;/plugin&gt;
            ...
        &lt;/plugins&gt;
        ...
    &lt;/build&gt;
...
&lt;/project&gt;</code></pre>
  </div>
 </div> 
</section>
<section> 
 <h2 id="Adding-resources-in-domain-mode"><a name="Adding_resources_in_domain_mode"></a>Adding resources in domain mode</h2> 
 <p>Adding resources in domain mode works the same as the examples above, except you need to add the &lt;profiles&gt; property as well as specify at least one profile.</p> 
 <div> 
  <div> 
   <pre class="border shadow rounded"><code>&lt;project&gt;
    ...
    &lt;build&gt;
        ...
        &lt;plugins&gt;
            ...
            &lt;plugin&gt;
                &lt;groupId&gt;org.wildfly.plugins&lt;/groupId&gt;
                &lt;artifactId&gt;wildfly-maven-plugin&lt;/artifactId&gt;
                &lt;version&gt;3.0.2.Final&lt;/version&gt;
                &lt;executions&gt;
                    &lt;execution&gt;
                        &lt;id&gt;add-datasource&lt;/id&gt;
                        &lt;phase&gt;package&lt;/phase&gt;
                        &lt;goals&gt;
                            &lt;goal&gt;add-resource&lt;/goal&gt;
                        &lt;/goals&gt;
                        &lt;configuration&gt;
                            &lt;profiles&gt;
                                &lt;profile&gt;default&lt;/profile&gt;
                            &lt;/profiles&gt;
                            &lt;address&gt;subsystem=datasources,data-source=java:jboss/myDs&lt;/address&gt;
                             &lt;resources&gt;
                                &lt;resource&gt;
                                    &lt;properties&gt;
                                        &lt;jndi-name&gt;java:jboss/myDs&lt;/jndi-name&gt;
                                        &lt;enabled&gt;true&lt;/enabled&gt;
                                        &lt;connection-url&gt;jdbc:h2:mem:test;DB_CLOSE_DELAY=-1&lt;/connection-url&gt;
                                        &lt;driver-class&gt;org.h2.Driver&lt;/driver-class&gt;
                                        &lt;driver-name&gt;h2&lt;/driver-name&gt;
                                        &lt;user-name&gt;sa&lt;/user-name&gt;
                                        &lt;password&gt;sa&lt;/password&gt;
                                    &lt;/properties&gt;
                                &lt;/resource&gt;
                             &lt;/resources&gt;
                        &lt;/configuration&gt;
                    &lt;/execution&gt;
                &lt;/executions&gt;
            &lt;/plugin&gt;
            ...
        &lt;/plugins&gt;
        ...
    &lt;/build&gt;
...
&lt;/project&gt;</code></pre>
  </div>
 </div>
</section>
</section>
<footer class="footer w-100 pt-2 border-top bg-bg-primary">
    <div id="footer-nav" class="bg-bg-primary container">
    </div>
    <div id="footer-info" class="bg-bg-primary ps-2 pb-1 w-100">
        <div id="footer-custom-content"><div class="float-md-end"><a href="http://www.redhat.com/"><span class="fw-bold btn-link">Sponsored by</span> <img class="img-fluid" src="https://www.wildfly.org/assets/img/redhat_reversed.svg"></a></div></div>
        <div> <span class="far fa-copyright"></span>2022
<a href="http://www.jboss.org">JBoss by Red Hat</a>
-
<a href="http://repository.jboss.org/licenses/lgpl-2.1.txt">GNU Lesser General Public License v2.1 only</a> 
</div>
        <div>Rendered using <a href="https://github.com/Bernardo-MG/docs-maven-skin">Docs Maven Skin</a> 2.2.6</div>
    </div>
</footer>
<script src="./lib/bootstrap/dist/js/bootstrap.min.js"></script>
<script src="./lib/highlight/highlight.pack.js"></script>
<script src="./js/initializeHighlight.js"></script>
</body>
</html>
